#conf_molikuners-MacBook-Pro # Work

eval "$(jenv init -)"
eval "$(rbenv init - zsh)"

adc() {
  adb connect "$@" && adb wait-for-device
}
export GPG_TTY=$(tty)
export PATH="$PATH:$HOME/Library/Android/sdk/platform-tools/:$HOME/Library/Android/sdk/emulator/:/Users/molikuner/.local/bin:/Users/molikuner/Library/Python/3.9/bin:/Users/molikuner/.cargo/bin"

dlStream() {
  if [ "X$2" = "X" ]; then
    echo "$0 <url> <stream-name>"
    return 1
  fi
  ffmpeg -i "`streamlink --stream-url \"$1\" best`" -c:a copy -c:v copy "${2}.mkv"
}

openStream() {
  if [ "X$2" = "X" ]; then
    echo "$0 <url> <stream-name>"
    return 1
  fi
  dlStream "$1" "$2" &
  iina "${2}.mkv"
  fg
}

gitMolikuner() {
  if ! git status &>/dev/null; then
    echo "You need to have an exsisting git repo" >&2
    return 1
  fi
  git config user.name molikuner
  git config user.email molikuner@gmail.com
}

gitWork() {
  if ! git status &>/dev/null; then
    echo "You need to have an exsisting git repo" >&2
    return 1
  fi
  git config --unset user.name
  git config --unset user.email
}

gitProfile() {
  if ! git status &>/dev/null; then
    echo "You need to have an exsisting git repo" >&2
    return 1
  fi
  local name
  name=$(git config user.name)
  if [ "$name" = "molikuner" ]; then
    echo "Profile: molikuner"
  elif [ "$name" = "$NAME" ]; then # $NAME is from .credentials
    echo "Profile: Work"
  else
    echo "Unknown profile" >&2
    return 1
  fi
}

tdev() {
  tmx "dev" $@
}

if ! _has_session main ; then
  _create_session main
fi

alias cat="bat --theme=\$(defaults read -globalDomain AppleInterfaceStyle &> /dev/null && echo default || echo GitHub)"
alias git="/usr/local/bin/git"
alias fixLint="git diff --name-only --cached --relative | grep '\\.kt[s\"]\\?$' | xargs ktlint --relative -F ."
alias docker='docker stats --no-stream &>/dev/null || eval $(docker-machine env default) && docker'
